# ==========================================
# Algo-Trade Platform - Environment Configuration
# ==========================================
# Copy this file to .env and customize for your environment
# DO NOT commit .env to version control

# ==========================================
# General Application Settings
# ==========================================
APP_ENV=development
LOG_LEVEL=INFO
INSTALL_DEV=false

# ==========================================
# Interactive Brokers (IBKR) Configuration
# ==========================================
# For Paper Trading, use TWS/IB Gateway paper trading ports:
# - TWS Paper: 7497 (live market data)
# - IB Gateway Paper: 4002
# For Live Trading:
# - TWS Live: 7496
# - IB Gateway Live: 4001

IBKR_HOST=127.0.0.1
IBKR_PORT=7497
IBKR_CLIENT_ID=1

# IBKR Credentials (if needed for automated login)
# IBKR_USERNAME=your_username
# IBKR_PASSWORD=your_password

# ==========================================
# Kafka Configuration
# ==========================================
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# Topic Configuration
KAFKA_TOPIC_MARKET_EVENTS=market_events
KAFKA_TOPIC_OFI_EVENTS=ofi_events
KAFKA_TOPIC_ORDER_INTENTS=order_intents
KAFKA_TOPIC_EXEC_REPORTS=exec_reports

# Consumer/Producer Settings
KAFKA_CONSUMER_GROUP_ID=algotrader
KAFKA_AUTO_OFFSET_RESET=latest
KAFKA_ENABLE_AUTO_COMMIT=true

# ==========================================
# Data Plane Configuration
# ==========================================
DATA_STORAGE_PATH=/app/data
NTP_SERVER=pool.ntp.org
NTP_DRIFT_THRESHOLD_MS=100

# Data quality gates
COMPLETENESS_THRESHOLD=0.95
FRESHNESS_THRESHOLD_MS=5000

# TDDI (Time Decay Driven Indexing) Configuration
TDDI_ALPHA=0.1
TDDI_KAPPA_THRESHOLD=0.5

# ==========================================
# Strategy Plane Configuration
# ==========================================
# Optimization method: qp, hrp, black_litterman
OPTIMIZATION_METHOD=qp

# Risk model: covariance, regime, hybrid
RISK_MODEL=covariance

# Signal ensemble: ic_weighted, equal_weight, adaptive
SIGNAL_ENSEMBLE_METHOD=ic_weighted

# LinUCB Configuration
LINUCB_ALPHA=1.0
LINUCB_LAMBDA=1.0

# Signal weights (if using fixed weights)
SIGNAL_WEIGHT_OFI=0.20
SIGNAL_WEIGHT_ERN=0.20
SIGNAL_WEIGHT_VRP=0.15
SIGNAL_WEIGHT_POS=0.15
SIGNAL_WEIGHT_TSX=0.15
SIGNAL_WEIGHT_SIF=0.15

# ==========================================
# Order Plane Configuration
# ==========================================
# Risk Limits
MAX_GROSS_EXPOSURE=1000000
MAX_NET_EXPOSURE=500000
MAX_POSITION_SIZE=100000

# Throttling
POV_LIMIT=0.1
ADV_LIMIT=0.05

# Transaction cost learning
TC_LEARNING_RATE=0.01
TC_DECAY_FACTOR=0.95

# ==========================================
# Monitoring & Observability
# ==========================================
# Prometheus
PROMETHEUS_PORT_DATA=8000
PROMETHEUS_PORT_STRATEGY=8001
PROMETHEUS_PORT_ORDER=8002

# Grafana
GRAFANA_ADMIN_PASSWORD=admin

# ==========================================
# Database Configuration (if needed)
# ==========================================
# DATABASE_URL=postgresql://user:password@localhost:5432/algotrader
# REDIS_URL=redis://localhost:6379/0

# ==========================================
# Security & Secrets
# ==========================================
# In production, use AWS Secrets Manager, Vault, or similar
# SECRET_KEY=your-secret-key-here
# JWT_SECRET=your-jwt-secret-here

# ==========================================
# Feature Flags
# ==========================================
ENABLE_PAPER_TRADING=true
ENABLE_LIVE_TRADING=false
ENABLE_KILL_SWITCH=true
ENABLE_CIRCUIT_BREAKER=true

# ==========================================
# Performance Tuning
# ==========================================
MAX_WORKERS=4
ASYNC_POOL_SIZE=100
REQUEST_TIMEOUT_MS=5000

# ==========================================
# Development & Testing
# ==========================================
# Set to true to enable development dependencies in Docker
INSTALL_DEV=false

# Mock mode (for testing without IBKR connection)
MOCK_IBKR=false

# Backtesting mode
BACKTEST_MODE=false
BACKTEST_START_DATE=2023-01-01
BACKTEST_END_DATE=2023-12-31
