# ============================================================================
# Algo-Trade Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env file to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# VAULT CONFIGURATION (Recommended for Production)
# ----------------------------------------------------------------------------
# HashiCorp Vault URL (e.g., https://vault.example.com:8200)
VAULT_ADDR=https://localhost:8200

# Vault authentication token
VAULT_TOKEN=your-vault-token-here

# Enable Vault integration (0=disabled, 1=enabled)
DP_USE_VAULT=0

# Vault secret path for main broker config (KV v2: secret/data/algo-trade/broker)
DP_VAULT_PATH=secret/data/algo-trade/broker

# Vault secret path specifically for broker password (optional, for targeted fetch)
DP_VAULT_PATH_PASSWORD=secret/data/algo-trade/broker-password

# ----------------------------------------------------------------------------
# ENCRYPTED LOCAL SECRETS (Alternative to Vault)
# ----------------------------------------------------------------------------
# Path to encrypted secrets file (will be created if it doesn't exist)
DP_ENCRYPTED_SECRETS_FILE=.secrets/encrypted_secrets.bin

# Encryption key for local secrets (base64-encoded Fernet key)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
DP_SECRETS_ENCRYPTION_KEY=your-base64-fernet-key-here

# Enable encrypted local secrets (0=disabled, 1=enabled)
DP_USE_ENCRYPTED_SECRETS=0

# ----------------------------------------------------------------------------
# CONFIGURATION FILE PATHS
# ----------------------------------------------------------------------------
# Path to main data plane configuration YAML
DATA_PLANE_CONFIG=config/data_plane.yaml

# Environment variable prefix for overrides (default: DP_)
DATA_PLANE_ENV_PREFIX=DP_

# Allow writing sample config files (0=no, 1=yes) - keep disabled in production
DP_ALLOW_CONFIG_WRITE=0

# ----------------------------------------------------------------------------
# BROKER CONFIGURATION (IBKR)
# ----------------------------------------------------------------------------
# Broker name identifier
DP_BROKER__NAME=IBKR

# IBKR TWS/Gateway host
DP_BROKER__HOST=127.0.0.1

# IBKR TWS/Gateway port (7497 for TWS paper, 7496 for TWS live, 4002 for Gateway paper, 4001 for Gateway live)
DP_BROKER__PORT=7497

# IBKR username (optional - usually authenticated via TWS/Gateway)
DP_BROKER__USERNAME=

# IBKR password (optional - usually authenticated via TWS/Gateway)
DP_BROKER__PASSWORD=

# Paper trading mode (true for paper/simulation, false for live)
DP_BROKER__PAPER=true

# Client ID for IBKR connection (unique identifier for this client)
DP_IBKR__CLIENT_ID=1

# Connection timeout in seconds
DP_IBKR__TIMEOUT=30

# Enable read-only mode (prevents order execution)
DP_IBKR__READONLY=false

# ----------------------------------------------------------------------------
# DATA PROVIDER CONFIGURATION
# ----------------------------------------------------------------------------
# Data provider identifier (local, yfinance, etc.)
DP_DATA__PROVIDER=local

# Local cache directory for market data
DP_DATA__CACHE_PATH=data/cache

# Historical data lookback window in days (default: 3 years)
DP_DATA__HISTORICAL_WINDOW_DAYS=1095

# Path to assets manifest CSV
DP_DATA__ASSETS_FILE=data/assets.csv

# ----------------------------------------------------------------------------
# EXECUTION CONFIGURATION
# ----------------------------------------------------------------------------
# Enable execution module (false for backtesting only)
DP_EXECUTION__ENABLED=false

# Default slippage assumption (0.001 = 0.1%)
DP_EXECUTION__DEFAULT_SLIPPAGE=0.001

# Maximum position risk as fraction of portfolio (0.05 = 5%)
DP_EXECUTION__MAX_POSITION_RISK=0.05

# ----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ----------------------------------------------------------------------------
# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
DP_LOGGING__LEVEL=WARNING

# Log format string
DP_LOGGING__FMT=%(asctime)s %(levelname)s [%(name)s] %(message)s

# Enable audit logging for secrets access
DP_AUDIT_LOGGING_ENABLED=true

# Audit log file path
DP_AUDIT_LOG_FILE=logs/security_audit.log

# Mask sensitive values in logs (true recommended)
DP_AUDIT_MASK_SECRETS=true

# ----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ----------------------------------------------------------------------------
# Enforce HTTPS for all external connections
DP_SECURITY__ENFORCE_HTTPS=true

# Verify SSL certificates (disable only for development)
DP_SECURITY__VERIFY_SSL=true

# Maximum number of failed authentication attempts before lockout
DP_SECURITY__MAX_AUTH_ATTEMPTS=3

# Secrets rotation reminder interval in days (0 to disable)
DP_SECURITY__ROTATION_REMINDER_DAYS=90

# Enable secrets validation on startup
DP_SECURITY__VALIDATE_ON_STARTUP=true

# Minimum password length (if using password-based auth)
DP_SECURITY__MIN_PASSWORD_LENGTH=16

# ----------------------------------------------------------------------------
# TESTING & DEVELOPMENT
# ----------------------------------------------------------------------------
# Hypothesis testing profile (default, dev, ci)
HYPOTHESIS_PROFILE=default

# Enable development mode (additional debugging, relaxed security)
DP_DEV_MODE=false

# Skip pre-live validation gates (NOT recommended for production)
DP_SKIP_VALIDATION_GATES=false

# ----------------------------------------------------------------------------
# OPERATIONAL SETTINGS
# ----------------------------------------------------------------------------
# Application environment (development, staging, production)
DP_ENVIRONMENT=development

# Enable performance monitoring
DP_ENABLE_MONITORING=false

# Health check endpoint port
DP_HEALTH_CHECK_PORT=8080

# ============================================================================
# USAGE NOTES
# ============================================================================
#
# 1. VAULT SETUP (Recommended):
#    - Set VAULT_ADDR and VAULT_TOKEN
#    - Set DP_USE_VAULT=1
#    - Configure DP_VAULT_PATH to your secrets path
#    - Store broker credentials in Vault at specified path
#
# 2. ENCRYPTED LOCAL SECRETS (Alternative):
#    - Generate encryption key: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#    - Set DP_SECRETS_ENCRYPTION_KEY with generated key
#    - Set DP_USE_ENCRYPTED_SECRETS=1
#    - Use the secrets_manager.py utility to manage secrets
#
# 3. ENVIRONMENT VARIABLES (Quick Setup):
#    - Set broker connection params with DP_BROKER__* prefix
#    - Set DP_IBKR__* variables for IBKR-specific settings
#    - This is the simplest method but least secure
#
# 4. SECURITY BEST PRACTICES:
#    - Always use Vault or encrypted secrets for production
#    - Never commit .env file to version control
#    - Rotate secrets regularly (90 days recommended)
#    - Use separate credentials for paper and live trading
#    - Enable audit logging in production
#    - Use read-only mode for monitoring/analysis applications
#    - Keep DP_ALLOW_CONFIG_WRITE=0 in production
#
# 5. ENVIRONMENT-SPECIFIC CONFIGS:
#    - Create .env.development, .env.staging, .env.production
#    - Load appropriate file based on DP_ENVIRONMENT variable
#    - Never mix paper and live credentials in same environment
#
# ============================================================================
